---
title: 从输入url到浏览器显示页面发生了什么
date: 2022-03-23 13:05:26
tags: interview
---

输入 url 后，找 hosts 文件，如果 hosts 文件里包含 url 对应的 ip，直接

2. 应用层 DNS 解析域名

**递归查询和迭代查询**

递归查询：用户发起域名请求到 dnsA，dns A 中没有这个记录，向其他 dns 服务器请求，一直到查询到域名的 ip 为止

迭代查询：用户发起域名请求到 dnsA，dnsA 中没有这个记录，它告诉用户，我没有这个记录，并把 dnsB 的 ip 给用户，“你去问 dnsB 吧”

3. 应用层客户端发送 http 请求

http 请求包括**请求报头**和**请求主体**两个部分，其中请求报头包含了至关重要的信息，包括请求的方法（GET/POST）、目标 url、遵循的协议（http/https/ftp..），返回的信息是否需要缓存，以及客户端是否发送 cookie 等

4. 传输层 TCP 传输报文

三次握手，四次挥手

5. 网络层 ip 协议查询 mac 地址

IP 协议的作用是把 TCP 分割好的各种数据包传送给接收方。而要保证确实能传到接收方还需要接收方的 MAC 地址，也就是物理地址。IP 地址和 MAC 地址是一一对应的关系，一个网络设备的 IP 地址可以更换，但是 MAC 地址一般是固定不变的。ARP 协议可以将 IP 地址解析成对应的 MAC 地址。当通信的双方不在同一个局域网时，需要多次中转才能到达最终的目标，在中转的过程中需要通过下一个中转站的 MAC 地址来搜索下一个中转目标。

6.  数据到达数据链路层

再找到对方的 MAC 地址后，就将数据发送到数据链路层传输。这时，客户端发送请求的阶段结束

7.  服务器接收数据

8.  服务器相应数据

常见的 http 状态码

9.  服务器返回相应文件

10. 页面渲染

重排重绘
dom 树 -> cssom 树（渲染树）-> 布局渲染树（flow） -> 绘制渲染树
