---
title: js 作用域
date: 2022-04-25 09:15:15
tags:
  - js
  - 面试
---

作用域是一套规则，用于确定在何处以及如何查找变量（标识符）。如果查找的目的是对变量进行赋值，那么就会使用 LHS 查询；如果目的是获取变量的值，就会使用 RHS 查询

LHS 和 RHS 查询都会在当前执行作用域中开始，如果当前作用域没有找到所需的变量（标识符），就会向上级作用域继续查找。这样每次上升一级作用域，最后抵达全局作用域。

## 词法作用域和动态作用域

词法作用域是在写代码或者说定义时确定的（代码写好了，作用域就已经确定了，不会动态更改），而动态作用域是在运行时确定的

**JavaScript 并不具有动态作用域**

## 如何在运行时修改词法作用域

1. eval 函数

eval 通常被用来执行动态创建的代码，但严格模式下，eval 无法修改所在的作用域

2. new Function(..)

比 eval 略安全，但也要尽量避免使用

3. with

## 函数作用域和块作用域

每声明一个函数，就会创建一个函数作用域

### 立即执行函数表达式

### 块作用域

1. with

用 with 从对象中创建出的作用域仅在 with 声明中而非外部作用域中有效

2. try catch

es3 规范中规定 try / catch 的 catch 分句会创建一个块作用域，其中声明的变量仅在 catch 内部有效

3. let

es6 中的 let 创建的变量会**隐式**的附加在一个已存在的块作用域上，let 关键字可以将变量绑定到所在的**任意作用域**中（通常是 { .. } 内部）

只要声明是有效的，在声明中的任意位置都可以使用 { .. } 括号来为 let 创建一个用于绑定的块。
